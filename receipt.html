<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Payment Receipt | AdvocatBisht</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- jsPDF (FREE) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
    font-family: Inter, sans-serif;
    background: #f5f7fb;
    margin: 0;
}

.container {
    max-width: 800px;
    margin: 40px auto;
    background: #fff;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #e5e7eb;
    padding-bottom: 20px;
    margin-bottom: 30px;
}

.logo {
    font-size: 22px;
    font-weight: 700;
    color: #1a365d;
}

.logo span {
    color: #d4af37;
}

.status {
    background: #dcfce7;
    color: #166534;
    padding: 6px 14px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 14px;
}

.section {
    margin-bottom: 25px;
}

.section h3 {
    margin-bottom: 12px;
    color: #1a365d;
}

.row {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
    font-size: 15px;
}

.row strong {
    color: #374151;
}

.total {
    font-size: 18px;
    font-weight: 700;
    margin-top: 15px;
}

.footer {
    text-align: center;
    margin-top: 30px;
}

button {
    padding: 14px 22px;
    font-size: 15px;
    font-weight: 600;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    margin: 10px;
}

.download {
    background: #d4af37;
    color: #1a365d;
}

.home {
    background: #1a365d;
    color: #fff;
}
</style>
</head>

<body>

<div class="container" id="receipt">

    <div class="header">
        <div class="logo">Advocat<span>Bisht</span></div>
        <div class="status">PAID</div>
    </div>

    <div class="section">
        <h3>Client Details</h3>
        <div class="row"><span>Name</span><strong id="clientName"></strong></div>
        <div class="row"><span>Email</span><strong id="clientEmail"></strong></div>
        <div class="row"><span>Phone</span><strong id="clientPhone"></strong></div>
    </div>

    <div class="section">
        <h3>Consultation Details</h3>
        <div class="row"><span>Lawyer</span><strong id="lawyerName"></strong></div>
        <div class="row"><span>Case Type</span><strong id="caseType"></strong></div>
        <div class="row"><span>Date</span><strong id="date"></strong></div>
        <div class="row"><span>Time</span><strong id="time"></strong></div>
    </div>

    <div class="section">
        <h3>Payment Details</h3>
        <div class="row"><span>Payment Method</span><strong>UPI</strong></div>
        <div class="row"><span>UTR / Transaction ID</span><strong id="utr"></strong></div>
        <div class="row"><span>Payment Date</span><strong id="paymentDate"></strong></div>
        <div class="row total"><span>Total Paid</span><strong>₹1</strong></div>
    </div>

    <div class="footer">
        <button class="download" onclick="downloadPDF()">Download PDF</button>
        <button class="home" onclick="goHome()">Go to Home</button>
    </div>

</div>

<script>
const receiptData = JSON.parse(localStorage.getItem("receiptData"));

if (!receiptData) {
    alert("Receipt not found.");
    window.location.href = "index.html";
}

// Populate receipt
document.getElementById("clientName").innerText = receiptData.name;
document.getElementById("clientEmail").innerText = receiptData.email;
document.getElementById("clientPhone").innerText = receiptData.phone;

document.getElementById("lawyerName").innerText = receiptData.lawyerName;
document.getElementById("caseType").innerText = receiptData.service;
document.getElementById("date").innerText = receiptData.date;
document.getElementById("time").innerText = receiptData.time;

document.getElementById("utr").innerText = receiptData.utr;
document.getElementById("paymentDate").innerText = receiptData.paymentDate;

// PDF download
function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF();

    pdf.setFont("helvetica", "bold");
    pdf.setFontSize(18);
    pdf.text("AdvocatBisht - Payment Receipt", 20, 20);

    pdf.setFontSize(12);
    pdf.setFont("helvetica", "normal");

    let y = 35;
    const line = (label, value) => {
        pdf.text(`${label}: ${value}`, 20, y);
        y += 8;
    };

    line("Client Name", receiptData.name);
    line("Email", receiptData.email);
    line("Phone", receiptData.phone);
    line("Lawyer", receiptData.lawyerName);
    line("Case Type", receiptData.service);
    line("Date", receiptData.date);
    line("Time", receiptData.time);
    line("UTR", receiptData.utr);
    line("Payment Method", "UPI");
    line("Amount Paid", "₹1");
    line("Payment Date", receiptData.paymentDate);

    pdf.save(`Receipt_${receiptData.utr}.pdf`);
}

function goHome() {
    window.location.href = "index.html";
}
</script>

</body>
</html>
